
CREATE DATABASE  `village_green`;

CREATE TABLE produits(
   pro_id int(10) NOT NULL AUTO_INCREMENT,
   pro_nom VARCHAR(50),
   pro_description VARCHAR(150),
   pro_photo VARCHAR(50),
   pro_label VARCHAR(50),
   pro_ref VARCHAR(50),
   pro_prix_achat DECIMAL(5,2),
   pro_prixHT
   pro_status INT,
   pro_stock INT,
   pro_cat_id INT NOT NULL,
   pro_sup_id INT NOT NULL,
   PRIMARY KEY(pro_id),
   CONSTRAINT `products_category_fk_1` FOREIGN KEY(pro_cat_id) REFERENCES category(cat_id),
   CONSTRAINT `products_suppliers_fk_1` FOREIGN KEY(pro_sup_id) REFERENCES suppliers(sup_id)
)

CREATE TABLE clients(
   cli_id  int(10) NOT NULL AUTO_INCREMENT,
   cli_firstname VARCHAR(50),
   cli_lastname VARCHAR(50),
   cli_address VARCHAR(150),
   cli_cp INT,
   cli_city VARCHAR(50),
   cli_telephone INT(10),
   cli_bill_address VARCHAR(150),
   cli_bill_cp INT(5),
   cli_bill_city VARCHAR(50),
   cli_delivery_address VARCHAR(150),
   cli_delivery_cp INT(5),
   cli_delivery_city VARCHAR(50),
   cli_type VARCHAR(50),
   cus_coef INT,
   cli_emp_id INT NOT NULL,
   cli_cou_id  int(10) NOT NULL,
   PRIMARY KEY(cus_id),
    CONSTRAINT `customers_employee_fk1` FOREIGN KEY(cus_emp_id) REFERENCES employee(emp_id),
   CONSTRAINT `customer_country_fk1` FOREIGN KEY(cus_cou_id) REFERENCES country(cou_id)
) 

CREATE TABLE commandes(
   com_id  int(10) NOT NULL AUTO_INCREMENT,
   com_order_date DATETIME,
   com_date_payment DATETIME,
   com_date_ship DATETIME,
   com_date_delivery DATETIME,
   com_bill_address VARCHAR(150),
   com_bill_cp INT(5),
   com_bill_city VARCHAR(50),
   com_delivery_address VARCHAR(150),
   com_delivery_cp INT(5),
   com_delivery_city VARCHAR(50),
   com_status VARCHAR(50),
   com_cus_id INT NOT NULL,
   PRIMARY KEY(ord_id),
   CONSTRAINT `orders_fk_1` FOREIGN KEY(ord_cus_id) REFERENCES customer(cus_id)
) 

CREATE TABLE détails_commandes(
   comde_id  int(10) NOT NULL AUTO_INCREMENT,
   comde_unit_price DECIMAL(10,2),
   comde_qte INT(5),
   comde_discount decimal(4,2) DEFAULT NULL,
   comde_pro_id int(10) NOT NULL,
   comde_ord_id int(10) NOT NULL,
   PRIMARY KEY(ode_id),
   CONSTRAINT `orders_details_fk_1` FOREIGN KEY(ode_pro_id) REFERENCES products(pro_id),
   CONSTRAINT `orders_details_fk_2` FOREIGN KEY(ode_ord_id) REFERENCES orders(ord_id)
) 
CREATE TABLE pays (
  pays_id int(10) NOT NULL AUTO_INCREMENT,
  pays_nom varchar(45) NOT NULL,
     PRIMARY KEY(cou_id)
) 

CREATE TABLE fournisseurs(
   fourn_id int(10) NOT NULL AUTO_INCREMENT,
   fourn_firstname VARCHAR(50),
   fourn_lastname VARCHAR(50),
   fourn_address VARCHAR(150),
   fourn_cp  INT(5),
   fourn_city VARCHAR(50),
   fourn_type VARCHAR(50),
   fourn_cou_id int(10) NOT NULL,
   PRIMARY KEY(sup_id),
   CONSTRAINT `suppliers_fk_1` FOREIGN KEY(sup_cou_id) REFERENCES country(cou_id)
) 

CREATE TABLE categories(
   cat_id int(10) NOT NULL AUTO_INCREMENT,
   cat_name VARCHAR(50) NOT NULL,
   cat_parent_id int(10),
   PRIMARY KEY(cat_id),
   CONSTRAINT `category_ibfk_1` FOREIGN KEY (`cat_parent_id`) REFERENCES `category` (`cat_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE departements(
   dep_id int(10) NOT NULL AUTO_INCREMENT,
   dep_name VARCHAR(50),
   PRIMARY KEY(dep_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE postes(
   post_id int(10) NOT NULL AUTO_INCREMENT,
   pos_name VARCHAR(50),
   PRIMARY KEY(post_id)
) 


CREATE TABLE employées(
   emp_id int(10) NOT NULL AUTO_INCREMENT,
   emp_firstname VARCHAR(50),
   emp_lastname VARCHAR(50),
   emp_address VARCHAR(150),
   emp_cp  INT(5),
   emp_city VARCHAR(50),
   emp_tel INT,
   emp_dep_id INT NOT NULL,
   emp_post_id INT NOT NULL,
   emp_cou_id  int(10) NOT NULL,
   PRIMARY KEY(emp_id),
   CONSTRAINT `employees_departments_fk_1` FOREIGN KEY(emp_dep_id) REFERENCES departments(dep_id),
   CONSTRAINT `employees_posts_fk_1` FOREIGN KEY(emp_post_id) REFERENCES posts(post_id),
   CONSTRAINT `employees_country_fk_1` FOREIGN KEY(emp_cou_id) REFERENCES country(cou_id)
) 

